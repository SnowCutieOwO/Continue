import{_ as a,c as i,o as l,b0 as n}from"./chunks/framework.w6NQj85O.js";const e="/assets/image1.BiiovLGx.png",E=JSON.parse('{"title":"🌐 初次使用","description":"","frontmatter":{},"headers":[],"relativePath":"FallbackServer/overview.first-startup-guide.md","filePath":"FallbackServer/overview.first-startup-guide.md"}'),p={name:"FallbackServer/overview.first-startup-guide.md"};function t(h,s,k,r,o,d){return l(),i("div",null,s[0]||(s[0]=[n(`<h1 id="🌐-初次使用" tabindex="-1">🌐 初次使用 <a class="header-anchor" href="#🌐-初次使用" aria-label="Permalink to &quot;🌐 初次使用&quot;">​</a></h1><div class="warning custom-block"><p class="custom-block-title">警告</p><p>配置文件会随更新而发生变化，这些改动都是迎合用户且必要的改动。若你发现差异，可以加入我们的 Discord 聊天群组。</p></div><h2 id="_1-正确选择对应插件版本" tabindex="-1">1) 正确选择对应插件版本 <a class="header-anchor" href="#_1-正确选择对应插件版本" aria-label="Permalink to &quot;1) 正确选择对应插件版本&quot;">​</a></h2><ul><li>首先，关闭群组服；</li><li>下载 <a href="https://www.spigotmc.org/resources/86398/" target="_blank" rel="noreferrer">.zip</a> 文件并解压，其中内容大致为：</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>FallbackServer.zip</span></span>
<span class="line"><span>L Fallback-Server-Addon-版本号.jar</span></span>
<span class="line"><span>L FallBackServer-版本号.jar</span></span>
<span class="line"><span>L FallBackServerVelocity-版本号.jar</span></span></code></pre></div><ul><li>选择你使用的核心对应版本的插件文件（例如，你正在使用 Velocity，则将 <code>FallBackServerVelocity</code> 放入服务器插件文件夹。同理，使用 BungeeCord 则将 <code>FallBackServer</code> 放入，依此类推），你可以在<a href="./overview.version-type">这里</a>找到相关描述； 将插件放入文件夹后重启服务器即可。</li></ul><div class="tip custom-block"><p class="custom-block-title">注意</p><p>该步骤会影响插件运转，请正确按照上方步骤进行安装操作。</p></div><h2 id="_2-默认模式下的基础安装" tabindex="-1">2) 默认模式下的基础安装 <a class="header-anchor" href="#_2-默认模式下的基础安装" aria-label="Permalink to &quot;2) 默认模式下的基础安装&quot;">​</a></h2><ul><li><p>启动后，插件会释放配置文件，类型会因使用核心不同而略有差别，你会找到如下的对应文件夹：</p><ul><li>BungeeCord：</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>plugins\\</span></span>
<span class="line"><span>  L FallBackServer\\</span></span>
<span class="line"><span>  L FallBackServer-版本号.jar</span></span></code></pre></div><ul><li>Velocity:</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>plugins\\</span></span>
<span class="line"><span>  L fallbackservervelocity\\</span></span>
<span class="line"><span>  L FallBackServerVelocity-版本号.jar</span></span></code></pre></div></li><li><p>打开文件夹，使用任意一个文本编辑器，并打开 <code>config.yml</code>。</p></li><li><p>搜索 <strong>fallback</strong>，你将会见到一系列预先配置好的大厅列表。</p></li><li><p>返回服务器根目录文件夹，现在看起来应该是这样的：</p><ul><li>BungeeCord(WaterFall)：</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>logs\\</span></span>
<span class="line"><span>modules\\</span></span>
<span class="line"><span>pluigns\\</span></span>
<span class="line"><span>config.yml</span></span>
<span class="line"><span>locations.yml</span></span>
<span class="line"><span>start.sh</span></span>
<span class="line"><span>waterfall.jar</span></span>
<span class="line"><span>waterfall.yml</span></span></code></pre></div><ul><li>Velocity：</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>lang\\</span></span>
<span class="line"><span>logs\\</span></span>
<span class="line"><span>plugins\\</span></span>
<span class="line"><span>forwading.secret</span></span>
<span class="line"><span>messages.yml</span></span>
<span class="line"><span>start.sh</span></span>
<span class="line"><span>velocity.jar</span></span>
<span class="line"><span>velocity.toml</span></span></code></pre></div></li><li><p>根据你使的核心种类打开对应的 config.yml（<code>BungeeCord</code>）或 velocity.toml（<code>Velocity</code>）。</p></li><li><p>复制大厅服的名称，如下文所示：</p><ul><li>BungeeCord(Waterfall)：</li></ul><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  lobby1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    motd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&amp;1Just another Waterfall - Forced Host&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">localhost:25566</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restricted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  lobby2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    motd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&amp;1Just another Waterfall - Forced Host&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">localhost:25567</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restricted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  testsv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    motd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&amp;1Just another Waterfall - Forced Host&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">localhost:25568</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restricted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span></code></pre></div><ul><li>Velocity：</li></ul><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">servers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  testsv = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:25568&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  testsv2 = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:25569&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  lobby2 = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:25567&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # In what order we should try when a player logs in or is kicked from a server.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  try = [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lobby1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Configure your servers here. Each key represents the server&#39;s name, and the value</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # represents the IP address of the server to connect to.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  lobby1 = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:25566&quot;</span></span></code></pre></div></li><li><p>回到你的文本编辑器并在“fallback”下的“default”组中加入你的服务器名称，需要<strong>注意大小写</strong>。下文是一个示例：</p></li></ul><div class="language-YAML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">YAML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Add here your groups with their servers and lobbies.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  fallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    bedwars</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      servers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bwgame1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bwgame2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bwgame3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      lobbies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bwlobby1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bwlobby2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bwlobby3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">FALLBACK</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    survival</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      servers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">survival</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      lobbies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lobby1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lobby2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lobby3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">RECONNECT</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># DON&#39;T delete this default group.</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      servers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lobby1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lobby2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">lobby3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DEFAULT</span></span></code></pre></div><ul><li>将配置保持在“mode: DEFAULT”，保存所有改动，你的大厅服就配置完成了。</li><li>如上所述，“fallback”部分可以设置每个服在崩溃情况下的行为。它非常易于理解。为了进一步讲述，我会在这里放置一个示例。</li></ul><p><img src="`+e+'" alt="img"></p><ul><li>在浏览上述配置之后，你就可以开始编写自己的配置了。需要注意的是，这只是一个用于理解配置的简单示例，完整示例如下。</li></ul><p>!<img src="https://i.imgur.com/kVXAthr.png" alt="img"></p><ul><li>在完成必要的修改之后，只需重启群组或执行命令 <code>/fs reload</code> 即可应用改动。</li><li>你现在可能会思考“mode: FALLBACK”的意义。其实它相当简单。在玩家还连接到服务器却遇到服务器崩溃的情况时，插件会自动识别并将你的玩家引流回你预先设计好的大厅服。如果这些大厅服满员或不可用，则插件会将你的玩家重分配至“default”组中的服务器内，也就是你稍早前配置的那些内容，如果这些服务器仍然无法容纳足够的玩家，则这些玩家就会直接断开连接。</li></ul><div class="tip custom-block"><p class="custom-block-title">注意</p><p>插件现在可使用默认方法（在崩服时自动整理玩家），若你想要启用 RECONNECT（重连）模式，请转至步骤 2.5。</p></div><h2 id="_2-5-重连模式" tabindex="-1">2.5) 重连模式 <a class="header-anchor" href="#_2-5-重连模式" aria-label="Permalink to &quot;2.5) 重连模式&quot;">​</a></h2><ul><li>找到核心的 <code>plugins/</code> 文件夹，再找到 <code>FallBackServer</code>（BungeeCord/WaterFall）或 <code>FallbackServerVelocity</code><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> 文件夹。打开并通过文本编辑器打开其中的 <code>config.yml</code> 文件。</li><li>找到 <code>fallback</code> 部分，你可以看见你先前修改的组。自行决定哪个组会使用重连模式，并为其设置正确的服务器。例如，若你需要所有生存服（如 survival1、survival2）使用重连模式，请将其列在“servers”部分下，需要注意大小写匹配。</li><li>之后，在“lobbies”部分下，添加玩家重连失败后进入的大厅服。请再次注意大小写匹配。这一步非常重要，因为它决定了玩家在重连模式失败情况下的重定向方向。</li><li>你可以参考提供的示例。</li><li>在完成这些步骤之后，只需将 <code>mode: FALLBACK</code> 修改为 <code>mode: RECONNECT</code>， 然后在游戏或控制台内输入命令 <code>/fs reload</code> 应用所有改动即可。</li><li>这样，你的群组搭建就大功告成了！</li></ul><h2 id="_3-spiogt-重连附属" tabindex="-1">3) Spiogt 重连附属 <a class="header-anchor" href="#_3-spiogt-重连附属" aria-label="Permalink to &quot;3) Spiogt 重连附属&quot;">​</a></h2><ul><li>如果你读到了这里，恭喜！你已经抵达了本章的结尾。</li><li>首先，打开你的 Spigot 服务器所在的 <code>plugins/</code> 文件夹，并找到“FallbackServerAddom”文件夹（首次启动后出现）。进入文件夹并使用文本编辑器打开其中的 <strong>config.yml</strong>。</li><li>接下来，你需要为服务器设置正确的模式。<strong>FallbackServer</strong> 提供了两种选项：<strong>STANDALONE</strong> 即独立模式，有一台物理服务器专门用于重连。另外则是 <strong>ADDON</strong> 即附属模式，服务器会在插件启动后与插件本体联动。</li><li>打开 <strong>config.yml</strong> 之后，你可以在<a href="https://github.com/sasi2006166/Fallback-Server/blob/44f319a2d7897fddb3c3426b04fb4f4bc8f023c8/src/main/resources/config.yml#L19" target="_blank" rel="noreferrer">模式</a>部分下通过修改 <strong>&quot;NONE&quot;</strong> 进入指定模式。之后输入命令 <strong>/fsa reload</strong> 即可重启插件并将其部署在指定模式。</li><li>之后，你的 Spigot 子服就算配置成功了。</li></ul><div class="warning custom-block"><p class="custom-block-title">警告</p><p>请确保配置格式正确；否则会导致重连模式不按预期工作，影响玩家游玩体验甚至导致玩家被踢出服务器。</p></div><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>事实上，这里应该是小写名称。 上文的安装步骤中已经体现了这点。 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>',23)]))}const g=a(p,[["render",t]]);export{E as __pageData,g as default};
