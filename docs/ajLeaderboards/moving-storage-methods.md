# 切换存储方式

这个手把手的简单教程会教你如何切换存储方式且不丢失数据。

若你不担心数据丢失（指定时间刷新的排行榜会被重置，玩家需要重新加入才可在全时计分板中重新出现），那么请直接跳转到第二步，完成之后重启服务器即可。

## 1. 导出

首先，我们需要保存所有数据为一个文件，这样才可以将其导入至其他存储方法中。

若要如此，请输入命令 `/ajlb export <文件名称>`，在 `<文件名称>` 处填入新文件的名称。文件名称无关紧要，便于记忆即可。

处理这条命令需要一些时间，取决于你存储的数据量及存储方法本身的读写速度。（例如，如果你使用的是 SQLite，则可能需要几分钟）。每次成功导入排行榜后，插件都会在聊天栏中发送进度消息。

## 2. 切换

在完成到处之后，你可以在缓存存储配置文件中切换存储方法。

打开 `cache_storage.yml`，修改 `method` 项至你想要的存储方式。可选择的类型可在注释中找到（个人比较推荐 `h2`）。

在修改完毕（并保存文件）之后，重启服务器。

## 3. 导入

现在你已经使用新的存储方法，但你可以注意到大部分地方都显示 `排行榜不存在`。若要修复这个，我们只需导入我们在第一步导出的数据。

只需输入命令 `/ajlb import <文件名称>`，在 `<文件名称>` 处填入上文保存的文件名称。

需要注意的是如果插件提示文件不存在，你可能需要在文件名末尾加上 `.json`。

取决于存储文件的大小，命令完成处理可能需要一段时间。（但按道理讲，如果使用的是 h2，则这只需要几秒）。

## 4. 大功告成！

你已经成功地切换了存储类型！可以按需删除旧的存储文件（如使用 SQLite 的话，则可以删除 `cache.db`）以及导出的文件 `<文件名称>.json`。

请确保只在复制完成后删除不需要的文件。