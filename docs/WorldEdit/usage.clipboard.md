# 剪贴板

WorldEdit 有一个强大的剪贴板，允许你复制或者粘贴一块区域，甚至是将它保存为文件，并可从文件中任意读取或载入。剪贴板内容目前只能为长方体选区，所复制的也只能是你所选择的内容。

[[toc]]

需要注意的是，该功能与“历史记录”相似，你当前的剪贴板内容会存储在你的会话中，且在你离线之后可以至多（在服务器中）保存 10 分钟。

另外一个和“历史记录”相似的是，你当前的剪贴板可以通过命令 */clipboard* 命令清空。

## 复制与剪切

命令 `//copy` 会将你当前的选区保存至剪贴板，**且同时会记录你所复制内容时所处的位置**。后半句很重要；如果你想要稍后粘贴这块选区的内容，例如在你输入命令时处于你下方的一座桥，若要在粘贴时选择合适的位置，则你需要以你当时复制时站在的地方为准。这个方法可以让你更快地对准你放置建筑的位置；熟悉这种复制方式需要一些时间，但是用不了多久你就能习惯。

`//cut` 命令与 `//copy` 相似，它会剪切选区内的建筑。默认情况下，它会留下一片空气，但你也可以指定剪切后原来的选区所留下的方块是什么。

::: info 注意
该命令的特点会需要你注意**你在复制建筑时所处的位置**。这是一个非常重要的细节，如果你不知道这一点，很有可能会无法控制自己粘贴的建筑所在的位置！
:::

这两个命令都可以使用下面的额外 参数：

* `-e` 表示同时剪切/复制该选区内的实体；
* `-b` 表示同时复制选区内的生物群系（“剪切”不会删除选区内的生物群系——总该有些生物群系留在那）；
* `-m <蒙版>` 可以用于指定所要复制/剪切的方块。不匹配的方块将会在之后的粘贴中被替换为空气。

## 粘贴

当你将结构复制进你的剪贴板之后，你就可以把它们粘贴在世界中。命令的最后一个参数是可选的：如果你想要把剪贴板的结构粘贴在复制时的位置，只需输入命令 `//paste -o`，否则就会按照你的相对位置粘贴。
**需要注意的是如果你使用了相对位置粘贴，粘贴时你的位置就是执行复制命令时的位置。**例如，如果你在复制的时候位于你的城堡上空，那么粘贴时，城堡将会在你的脚下。
![img](https://worldedit.enginehub.org/en/latest/_images/copypasta.png)    
显示相对位置对剪贴板的粘贴功能的影响。

与复制/剪切命令相同，粘贴命令也有相同的三个参数：

* `-e` 表示同时粘贴该选区内的实体；
* `-b` 表示同时粘贴选区内的生物群系（“剪切”不会删除选区内的生物群系——总该有些生物群系留在那）；
* `-m <蒙版>` 可以用于指定所要粘贴的方块。不匹配的方块将会在之后的粘贴中被替换为空气。

另外，这里有一些额外参数：

* `-a` 将不会粘贴剪切板中包含的空气。与 `-m #existing` 蒙版相同。`-a` 和 `-m` 标志*可以*混合使用（或者你也可以将 `#existing` 标签添加至蒙版中）；
* `-s` 同时将选区移动到粘贴后的结构位置；
* `-n` 只会将选区移动到粘贴后的结构位置，而*不会*粘贴任何结构。该功能可以用于检查区域实际粘贴的位置[^1]；
* `-o` 将会将整个剪贴板位置修正至原位置，正如上文解释的那样。这会无视上文所说的“相对位置”的设定。

## 旋转

有些时候你可能需要旋转剪贴板中的内容。命令 `//rotate <y> [x] [z]` 就允许你在你的 Y 轴（上下）附近旋转九十度或九十度的任意倍数。准确来讲，这个命令实际上做到的是允许你以你在复制结构时的相对位置为中心旋转这个结构。如果你需要让一个建筑以它的中心为轴旋转，则你需要在复制结构的时候就站在这个结构中心的附近。

需要注意的是旋转命令也可以在 X 轴和 Z 轴之间以一定的角度旋转，尽管你必须将不旋转的那个轴的角度设置为 0 度，例如，只将一个结构在 X 轴上旋转，可以输入命令 `//rotate 0 90`，而只在 Z 轴上旋转，则可以输入命令 `//rotate 0 90`。在这两个方向上的旋转可以让你将原本的建筑水平或垂直翻转，反之亦然。

![img](https://worldedit.enginehub.org/en/latest/_images/rotate.png '根据你的相对位置旋转建筑')    

## 翻转

命令 `//flip [方位]` 命令会将当前剪贴板的内容按给定的平面翻转。默认情况下这个方位是你所面朝的方向，但你也可以自行指定。这里有三个你可以指定的平面：XY 轴交叉的平面、YZ 轴交叉的平面、XZ 轴交叉的平面。

|方位|对应平面|
|---|---|
|`north` 或 `south`|XY 轴交叉的平面|
|`east` 或 `west`|YZ 轴交叉的平面|
|`` 或 ``|XZ 轴交叉的平面|

![img](https://worldedit.enginehub.org/en/latest/_images/flip.png '通过指定的平面翻转剪贴板')    

## 载入与保存

WorldEdit 可以通过一种后缀为“schematic”的文件保存你剪贴板中的内容，或从本地文件中将结构导入你的剪贴板。

若要保存当前剪贴板中的内容，你可以使用命令 `//schem save <文件名称>`。
若要载入本地中的结构文件，你可以使用命令 `//schem load <文件名称>`。

::: info 对于非 schematic 格式的结构的提示
在 WorldEdit 7（对应 Minecraft 1.13）之前，文件是以“.schematic”格式的文件保存的，这些格式与其他软件例如 MCEDit、Redstone Simulator 等兼容。    
但不幸的是，这种格式不符合 Mojang 使用的高版本方块格式，所以一种新的结构文件出现了——我们将其命名为 [Sponge 结构格式](https://github.com/SpongePowered/Schematic-Specification)，使用的后缀名为“.schem”。    
需要注意的是，WorldEdit 仍然可以通过兼容层导入在旧版本（或第三方程序）保存的“.schematic”文件，但这些文件会变得不可修改。
:::

::: info 相对位置和结构
被复制结构的原位置和你所处的位置都会被保存至文件中，所以你可以稍后载入并将复制的内容粘贴在原处以调整你与这些结构的相对位置。用过 `//copy` 和 `//paste` 命令的都知道这两个命令会如何存储你的相对位置。    
需要注意的是，第三方软件所使用的建筑结构很可能不会像 WorldEdit 那样为你保存你的相对位置，所以它们会缺少这一部分的信息。
:::

### 结构文件管理

::: info 列出可用的结构文件
```
//schem list [-dn] [-p <页码>]
```
:::

标志 `-d` *或* `-n` 可以用于按文件修改时间排序结构文件。而 `-p` 标志则允许你指定页码。需要注意的是该命令输出的结构是可以用鼠标进行交互的——底部的按钮可以点击翻页，而标有 `[L]` 的“按钮”则可以为你自动载入结构。

::: info 删除已有结构**
```
//schem delete <文件名称>
```
:::

::: info 列出可用的结构**
```
//schem listformats
```
:::

尽管上文只提到了更老的“MCEdit”结构和新版的“Sponge”结构格式，WorldEdit 实际上对剪贴板存储的方式是没有限制的。第三方可以为 WorldEdit 注册用于载入/保存结构的新格式。

### 结构文件存储

结构文件在 WorldEdit 的结构文件夹下保存和载入，这个文件夹默认名为 `schematics`，但你也可以在配置文件中修改它。这个文件夹只会在你游戏中首次保存了结构之后出现。如果你下载了一个结构文件并且想要添加它，你可以手动创建这个文件夹。文件夹需要位于 WorldEdit 的配置文件夹中，路径在 Bukkit/Spigot/Paper 通常为 `plugins/WorldEdit`，在其他服务端核心上则为 `config/worldeit`。这意味着**在默认情况下**结构文件夹会位于 `plugins/WorldEdit/schematics` 或 `config/worldedit/schematics` 中。

::: info 注意  
如果你想要在服务器之间共享同一个结构文件夹，或者只是想让这些文件随存随取，你就需要在配置文件中启用“allow-symbolic-links”选项。
:::

::: tip
保存与载入命令的参数，虽然要求的是文件名称，但你也可以填入相对路径，例如 `文件夹/文件`，这种情况下插件可以在你的结构文件夹中生成一个文件夹。这个功能在你想要为结构分类时很有用。
:::

## 共享

WorldEdit 提供了一种在线分享结构文件的便捷方法。

若要将你当前剪贴板的内容上传至网络，你可以输入命令 `//schem share`，你也可以为上传的结构命名，也可以按 *`//schem share [名称] [位置] [格式]`* 的格式来指定其余的参数。

::: info 分享链接
默认情况下，WorldEdit 会将结构文件上传至 [EngineHub 的在线剪贴板](https://paste.enginehub.org/)。其他插件和模组可通过 WorldEdit API 注册新的分享链接，这样你就可以通过命令选择其他的上传途径。    
需要注意的一点是，上传至 EngineHub 剪贴板的内容将会在一个月后自动删除。所以默认功能只应用于短期服务而非长期存储。
:::

### 结构管理

[^1]: 译者注：通常情况下搭配选区可视化插件/模组，效果更明显。
