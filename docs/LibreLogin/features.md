# 插件功能

## 名称验证

LibreLogin 确保玩家能以有效用户名进入服务器，同时使用了大小写机制来防止玩家重名。

当前，有效玩家名需要满足如下条件：
* 短于 17 个字符
* 能够匹配正则表达式 `[a-zA-Z0-9_]*`（名称中只能包含英文大小写字母、数字及下划线）
* 仅存在单个以相同英文字母组合的名称（不会出现数据库中存在名称相同但大小写不同玩家的情况）

## 自动登录

LibreLogin 支持正版玩家免密登录。

### 启用功能

玩家可在游戏内输入 `/premium <登录密码>` 来开启免密登录

输入命令 `/cracked` 可禁用该功能。

**需要注意的是，启用免密登录后玩家将不再能用离线客户端进入服务器，若玩家不小心启用了该功能，请联系管理员将其关闭。**

## 自动与手动名称迁移

*将数据在不同名称玩家间迁移从未如此简单*

### 自动模式

LibreLogin 会检查启用了自动登录功能的玩家，并将对应名称上的数据（物品、其他插件数据）迁移至当前名称的玩家数据中。

### 手动模式

你可以使用命令 `/librelogin user migerate <旧名称> <新名称>` 命令来迁移玩家数据，若玩家启用了自动登录，则该命令会禁用此功能。

## 二步验证

LibreLogin 是市面上唯一通过 TOTP（谷歌验证、Authy 等）提供了二步验证的群组登录插件。若你想要保证账号安全，这个功能非常有用。

### 搭建

* 在 BungeeCord 或 Velocity 服务端安装 Procotolize 插件。[点此直达下载页](https://www.spigotmc.org/resources/protocolize-protocollib-for-bungeecord-waterfall-velocity.63778/)。
* 检查配置中的 TOTP 部分，确保启用后将你的服务器名称填入此处。
* 请确保玩家能在登录大厅中向下看，否则他们将无法看见手中所持的地图二维码。

### 使用

正常登录后输入 `/2fa`。你将会被送回大厅并给予一张二维码地图。在登录验证软件（Authy、谷歌验证等）中识别该二维码后重进服务器。至此，在登录后你还需通过命令 `/login <密码> <验证码>` 输入验证码。

## Floodgate

LibreLogin 支持通过 Floodgate 让基岩版玩家加入游戏。

### 搭建

你只需将 Floodgate 插件放入群组服核心。LibreLogin 会自动检测并与 Floodgate 实例交互。

### 原理

通过 Floodgate 进入服务器的玩家不会触发登录流程，处理方式与免密登录相似。一般情况下基岩版玩家不能执行大多数命令。

## 会话

LibreLogin 提供了会话系统。

### 这是什么？

玩家连接至服务器后会创建一次会话。若他们从同一个 IP 在指定时间间隔内重新回到服务器，LibreLogin 则会跳过输入密码登录的步骤。

### 配置会话系统

你可以在该部分配置中找到会话持续时间的配置：

<!--
  这段内容需要改进：
  原因：Shiki 不支持渲染 HOCON 格式
-->

```
# 决定了玩家会话的过期时间，单位为秒。默认值为一周（604800 秒）。设置为不大于 0 的值表示禁用该功能。
session-timeout=604800
```